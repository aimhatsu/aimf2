<ion-header>
  <ion-toolbar>
    <div class="toolbar-bg">
      <ion-title class="ion-no-padding">
        <img src="../../assets/images/mia-wht.png" width="200" alt="" />
      </ion-title>

      <ion-buttons slot="end" class="ion-text-right">
        <app-user-bar> </app-user-bar>
      </ion-buttons>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="openAtendimento()">
      <ion-icon name="md-funnel"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div wrap-box>
    <ion-grid>
      <ion-row class="sub-toolbar">
        <ion-col>
          <h1>DASHBOARD</h1>
          <p>Visão geral de resultados</p>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-slides>
      <ion-slide>
        <ion-card style="margin-left: 0px" class="card-stats">
          <ion-grid class="ion-no-padding">
            <ion-row class="ion-no-padding">
              <ion-col
                class="ion-no-padding"
                style="padding-top: 16px"
                size-md="3"
                size-sm="3"
                size-lg="3"
                size-xs="3"
              >
                <ion-label class="ion-text-center" color="primary">
                  <h1><strong>2,108{{totalpati}}</strong></h1>
                  <p style="color: #9f9c9c !important; font-size: 12px">
                    Pacientes
                  </p>
                </ion-label>
              </ion-col>

              <ion-col
                class="ion-no-padding"
                size-md="2"
                size-sm="2"
                size-lg="2"
                size-xs="2"
                style="text-align: center"
              >
                <circle-progress
                  percent="{{geralpoint}}"
                  [clockwise]="false"
                  [showTitle]="true"
                  [showSubtitle]="false"
                  [space]="-10"
                  [radius]="28"
                  [outerStrokeWidth]="10"
                  [innerStrokeWidth]="10"
                  [outerStrokeColor]="'#2694A3'"
                  [titleColor]="'#2694A3'"
                  [innerStrokeColor]="'#e7e8ea'"
                  [animation]="true"
                  [animationDuration]="300"
                  [showUnits]="false"
                ></circle-progress>
              </ion-col>

              <ion-col
                class="ion-no-padding"
                size-md="2.5"
                size-sm="2.5"
                size-lg="2.5"
                size-xs="2.5"
              >
                <h4 *ngIf="geralpoint" style="color: #2694a3" class="h4-stats">
                  <strong
                    >{{geralpoint}} MEUS <br />
                    PACIENTES</strong
                  >
                </h4>
              </ion-col>

              <ion-col
                class="ion-no-padding"
                size-md="2"
                size-sm="2"
                size-lg="2"
                size-xs="2"
                style="text-align: center"
              >
                <circle-progress
                  percent="{{globalpoint}}"
                  [clockwise]="false"
                  [showTitle]="true"
                  [showSubtitle]="false"
                  [space]="-10"
                  [radius]="28"
                  [outerStrokeWidth]="10"
                  [innerStrokeWidth]="10"
                  [outerStrokeColor]="'#EF9C92'"
                  [titleColor]="'#EF9C92'"
                  [innerStrokeColor]="'#e7e8ea'"
                  [animation]="true"
                  [animationDuration]="300"
                  [showUnits]="false"
                ></circle-progress>
              </ion-col>

              <ion-col
                class="ion-no-padding"
                size-md="2.5"
                size-sm="2.5"
                size-lg="2.5"
                size-xs="2.5"
              >
                <h4 style="color: #ef9c92" class="h4-stats">
                  <strong
                    >POPULAÇÃO <br />
                    GLOBAL</strong
                  >
                </h4>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card>
      </ion-slide>

      <ion-slide>
        <ion-card style="margin-right: 0px" class="card-stats">
          <ion-row>
            <ion-col size="3">
              <ion-item lines="none" style="border-right: 1px solid #999999">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="sad"></ion-icon>
                  <h2>54 {{instaveis}}</h2>
                  <p class="p-stats">INSTÁVEIS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="3">
              <ion-item lines="none" style="border-right: 1px solid #999999">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="phone-portrait"></ion-icon>
                  <h2>321 {{inativos}}</h2>
                  <p class="p-stats">INATIVOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="3">
              <ion-item lines="none" style="border-right: 1px solid #999999">
                <ion-label class="ion-text-center" color="primary">
                  <ion-icon class="icon-stats" name="logo-rss"></ion-icon>
                  <h2>{{bioconectados || 0}}</h2>
                  <p class="p-stats">BIOCONECTADOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="primary">
                  <ion-icon class="icon-stats" name="happy"></ion-icon>
                  <h2>1.200{{estaveis}}</h2>
                  <p class="p-stats">ESTÁVEIS</p>
                </ion-label>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-slide>
    </ion-slides>
    <ion-grid>
      <ion-row>
        <ion-col size="1">
          <div class="arrow-circle">
            <img
              (click)="prevSlide()"
              class="arrow-img"
              src="../../assets/images/back-arrow.png"
            />
          </div>
        </ion-col>

        <ion-col size="10">
          <div [hidden]="slideLength.length == 0">
            <ion-slides
              no-padding
              [options]="slideOpts"
              #slider
              (ionSlidesDidLoad)="slidesDidLoad(slider)"
              (ionSlideDidChange)="slideChanged(slider)"
            >
              <ion-slide>
                <ion-card class="slide-card">
                  <ion-row>
                    <ion-col size="3">
                      <img
                        class="slide-img"
                        src="../../assets/images/person.png"
                      />
                    </ion-col>

                    <ion-col size="9">
                      <h4 class="h4-slide">
                        <strong
                          >ID: {{'*******************'+(slide_Uid |
                          slice:20:24)}}</strong
                        >
                      </h4>
                      <p class="p-slide-title">Historic 360</p>
                      <p class="p-slide-subtitle">
                        Ultima analise as {{slideDate}}, hoje
                      </p>
                    </ion-col>
                  </ion-row>

                  <ion-row>
                    <ion-col
                      size="12"
                      style="background: #f78888 0% 0% no-repeat padding-box"
                    >
                      <p class="p-slide-bottom">Paciente com:</p>
                      <p class="p-slide-bottom">{{slidePatology}}</p>
                    </ion-col>
                  </ion-row>

                  <ion-row>
                    <ion-col size="12">
                      <!--  <img (click)="get_emot()" class="mind-img" src="../../assets/images/mind-icon.png">
                      <img (click)="get_corpo()" class="body-img" src="../../assets/images/body-icon.png">
                      <img (click)="get_mente()" class="emot-img" src="../../assets/images/emot-icon.png">
                   <canvas id="radarChart" style="margin-top: 45px" width="300" height="320"
                        responsive="true"></canvas>-->
                      <div style="display: flex;">
                        <plotly-plot class="plotly-chart"
                          [data]="graph.data"
                          [layout]="graph.layout"
                          [useResizeHandler]="true"
                          [style]="{position: 'relative'}"
                        >
                        </plotly-plot>
                      </div>
                    </ion-col>
                  </ion-row>

                  <ion-row style="margin-top: 5%;">
                    <ion-col size="6" style="padding: 0px">
                      <ion-button
                        (click)="openProntuario('body')"
                        class="slide-btn"
                        expand="block"
                        color="secondary"
                      >
                        <ion-icon
                          style="color: #00000042"
                          slot="start"
                          name="heart"
                        ></ion-icon>
                        <p>PRONTUARIO</p>
                      </ion-button>
                    </ion-col>

                    <ion-col size="6" style="padding: 0px">
                      <ion-button
                        (click)="nextSlide()"
                        class="slide-btn"
                        expand="block"
                        color="primary"
                      >
                        <ion-icon slot="start" name="checkmark"></ion-icon>
                        OK
                      </ion-button>
                    </ion-col>
                  </ion-row>
                </ion-card>
              </ion-slide>
            </ion-slides>
          </div>

          <div *ngIf="slideLength.length == 0">
            <h2 style="text-align: center; margin-top: 100px">
              Fim das pendências de hoje!
            </h2>
          </div>
        </ion-col>

        <ion-col size="1">
          <div class="arrow-circle">
            <img
              (click)="nextSlide()"
              class="arrow-img"
              src="../../assets/images/forward-arrow.png"
            />
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Chart Maps -->
    <ion-card class="ion-no-padding ion-no-margin card-style">
      <ion-card-header style="padding-bottom: 0px">
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item lines="none">
                <ion-label color="primary" class="ion-text-wrap">
                  <h2><strong>CONTROLE EPIDÊMIOLÓGICO</strong></h2>
                  <p>Indicadores e mapa de calor</p>
                  <p style="color: #3c3c3c">DE 10/03/2020 á 20/03/2020</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="none">
                <ion-icon
                  (click)="prevYear()"
                  slot="start"
                  name="ios-arrow-back"
                ></ion-icon>
                <ion-label class="ion-text-center">
                  <p>Selecione o ano</p>
                  <h2><strong>{{months[monthIndex]}} {{year}}</strong></h2>
                  <ion-button size="small" shape="round" mode="ios"
                    >Mensal</ion-button
                  >
                  <ion-button
                    size="small"
                    shape="round"
                    mode="ios"
                    fill="outline"
                    >Anual</ion-button
                  >
                </ion-label>
                <ion-icon
                  (click)="nextYear()"
                  slot="end"
                  name="ios-arrow-forward"
                ></ion-icon>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="none">
                <ion-label class="ion-text-center">
                  <p style="padding-left: 60%">Selecione a patologia</p>
                </ion-label>
              </ion-item>

              <div>
                <ion-select
                  placeholder="Select One"
                  value="covid"
                  ok-text="Okay"
                  cancel-text="Dismiss"
                >
                  <ion-select-option value="covid">COVID 19</ion-select-option>
                  <ion-select-option value="hiv">HIV</ion-select-option>
                </ion-select>
              </div>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="pin"></ion-icon>
                  <h2>2000</h2>
                  <p class="p-stats">SUSPEITOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="pin"></ion-icon>
                  <h2>253</h2>
                  <p class="p-stats">NOTIFICADOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="pin"></ion-icon>
                  <h2>15</h2>
                  <p class="p-stats">DIAGNOSTICADOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="pin"></ion-icon>
                  <h2>180</h2>
                  <p class="p-stats">RECUPERADOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="pin"></ion-icon>
                  <h2>2</h2>
                  <p class="p-stats">ÓBITOS</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="bug"></ion-icon>
                  <h2>2,8</h2>
                  <p class="p-stats">CONTÁGIO</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="secondary">
                  <ion-icon class="icon-stats" name="people"></ion-icon>
                  <h2>42%</h2>
                  <p class="p-stats">I.I.S.</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="primary">
                  <ion-icon class="icon-stats" name="person"></ion-icon>
                  <h2>20</h2>
                  <p class="p-stats">LEITOS DE UTI</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col size="1.3">
              <ion-item lines="none">
                <ion-label class="ion-text-center" color="primary">
                  <ion-icon class="icon-stats" name="person"></ion-icon>
                  <h2>60</h2>
                  <p class="p-stats">ENFERMARIA</p>
                </ion-label>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-header>

      <ion-card-content style="padding: 0">
        <!-- <div #map id="map"></div> -->
      </ion-card-content>
    </ion-card>

    <!-- Chart Histórico geral -->
    <ion-card class="card-style">
      <ion-card-header>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item lines="none">
                <ion-label color="primary" class="ion-text-wrap">
                  <h2><strong>HISTÓRICO GERAL</strong></h2>
                  <p>Linha do tempo de evolução dos meus pacientes</p>
                  <p style="color: #3c3c3c">DE 10/03/2020 á 20/03/2020</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="none">
                <ion-icon
                  (click)="prevYear()"
                  slot="start"
                  name="ios-arrow-back"
                ></ion-icon>
                <ion-label class="ion-text-center">
                  <p>Selecione o ano</p>
                  <h2><strong>{{months[monthIndex]}} {{year}}</strong></h2>
                  <ion-button size="small" shape="round" mode="ios"
                    >Mensal</ion-button
                  >
                  <ion-button
                    (click)="loadHistoricoGeral()"
                    size="small"
                    shape="round"
                    mode="ios"
                    fill="outline"
                    >Anual
                  </ion-button>
                </ion-label>
                <ion-icon
                  (click)="nextYear()"
                  slot="end"
                  name="ios-arrow-forward"
                ></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col></ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-header>
      <ion-card-content>
        <canvas id="myChart" responsive="true"></canvas>
      </ion-card-content>
    </ion-card>

    <!-- Chart Fatores de risco -->
    <ion-card class="card-style">
      <ion-card-header>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item lines="none">
                <ion-label color="primary" class="ion-text-wrap">
                  <h2><strong>FATORES DE RISCO</strong></h2>
                  <p>
                    Fatores que impactam na qualidade de vida dos meus pacientes
                  </p>
                  <p style="color: #3c3c3c">De 10/03/2020 á 20/03/2020</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="none">
                <ion-icon
                  (click)="prevYear()"
                  slot="start"
                  name="ios-arrow-back"
                ></ion-icon>
                <ion-label class="ion-text-center">
                  <p>Selecione o mês</p>
                  <h2><strong>{{months[monthIndex]}} {{year}}</strong></h2>
                  <ion-button
                    (click)="mensal_RiskFactor()"
                    size="small"
                    shape="round"
                    mode="ios"
                    >Mensal</ion-button
                  >
                  <ion-button
                    (click)="loadRiskFactor()"
                    size="small"
                    shape="round"
                    mode="ios"
                    fill="outline"
                    >Anual
                  </ion-button>
                </ion-label>
                <ion-icon
                  (click)="nextYear()"
                  slot="end"
                  name="ios-arrow-forward"
                ></ion-icon>
              </ion-item>
            </ion-col>

            <ion-col></ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          <ion-row class="ion-align-items-center">
            <ion-col size="1">
              <ion-item lines="none">
                <ion-avatar>
                  <img src="../../assets/images/img2.jpeg" alt="" />
                </ion-avatar>
              </ion-item>
            </ion-col>

            <ion-col size="11">
              <div class="bar">
                <div class="bar-1" [ngStyle]="{'width':'33%'}">33</div>
                <div class="bar-2" [ngStyle]="{'width':'33%'}">33</div>
                <div class="bar-3" [ngStyle]="{'width':'33%'}">33</div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-center">
            <ion-col size="1">
              <ion-item lines="none">
                <ion-avatar>
                  <img src="../../assets/images/img5.jpeg" alt="" />
                </ion-avatar>
              </ion-item>
            </ion-col>
            <ion-col size="11">
              <div class="bar">
                <div class="bar-1" [ngStyle]="{'width':'50%'}">50</div>
                <div class="bar-2" [ngStyle]="{'width':'25%'}">25</div>
                <div class="bar-3" [ngStyle]="{'width':'25%'}">25</div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-center">
            <ion-col size="1">
              <ion-item lines="none">
                <ion-avatar>
                  <img src="../../assets/images/img1.jpeg" alt="" />
                </ion-avatar>
              </ion-item>
            </ion-col>
            <ion-col size="11">
              <div class="bar">
                <div class="bar-1" [ngStyle]="{'width':'75%'}">75</div>
                <div class="bar-2" [ngStyle]="{'width':'5%'}">5</div>
                <div class="bar-3" [ngStyle]="{'width':'20%'}">20</div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-center">
            <ion-col size="1">
              <ion-item lines="none">
                <ion-avatar>
                  <img src="../../assets/images/img3.jpeg" alt="" />
                </ion-avatar>
              </ion-item>
            </ion-col>
            <ion-col size="11">
              <div class="bar">
                <div class="bar-1" [ngStyle]="{'width':'35%'}">35</div>
                <div class="bar-2" [ngStyle]="{'width':'35%'}">35</div>
                <div class="bar-3" [ngStyle]="{'width':'30%'}">30</div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-center">
            <ion-col size="1">
              <ion-item lines="none">
                <ion-avatar>
                  <img src="../../assets/images/img4.jpeg" alt="" />
                </ion-avatar>
              </ion-item>
            </ion-col>
            <ion-col size="11">
              <div class="bar">
                <div class="bar-1" [ngStyle]="{'width':'33%'}">33</div>
                <div class="bar-2" [ngStyle]="{'width':'33%'}">33</div>
                <div class="bar-3" [ngStyle]="{'width':'33%'}">33</div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <!-- Chart Audience -->
    <ion-card class="card-style">
      <ion-card-header>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item lines="none">
                <ion-label color="primary" class="ion-text-wrap">
                  <h2><strong>AUDIÊNCIA DOS MEUS PACIENTES</strong></h2>
                  <p>Audiência segmentada por gênero</p>
                  <p style="color: #3c3c3c">DE 10/03/2020 á 20/03/2020</p>
                </ion-label>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="none">
                <ion-icon
                  (click)="prevYear()"
                  slot="start"
                  name="ios-arrow-back"
                ></ion-icon>
                <ion-label class="ion-text-center">
                  <p>Selecione o ano</p>
                  <h2><strong>{{months[monthIndex]}} {{year}}</strong></h2>
                  <ion-button
                    (click)="audienceMonthly()"
                    size="small"
                    shape="round"
                    mode="ios"
                    >Mensal</ion-button
                  >
                  <ion-button
                    (click)="loadAudience()"
                    size="small"
                    shape="round"
                    mode="ios"
                    fill="outline"
                    >Anual
                  </ion-button>
                </ion-label>
                <ion-icon
                  (click)="nextYear()"
                  slot="end"
                  name="ios-arrow-forward"
                ></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col></ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-header>

      <ion-card-content>
        <canvas id="audienceChart" responsive="true"></canvas>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
